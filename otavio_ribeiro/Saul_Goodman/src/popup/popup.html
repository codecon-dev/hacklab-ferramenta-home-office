<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Saul Goodman - Radar de Procrastinação</title>
    <link rel="stylesheet" href="popup.css" />
    <script src="../vendor/chart.umd.js" defer></script>
    <script src="../vendor/jspdf.umd.min.js" defer></script>
    <script type="module" src="../../dist/popup/popup.js" defer></script>
  </head>
  <body>
    <header class="sg-header">
      <div class="badge">
        <span class="label">Índice</span>
        <span id="scoreValue" class="value">--</span>
      </div>
      <div class="meta">
        <p id="scoreMessage" class="message">Carregando expediente...</p>
        <small id="lastSync">Atualizando...</small>
      </div>
    </header>

    <main>
      <section class="summary">
        <article>
          <span class="title">
            Produtivo
            <span
              class="info-icon"
              aria-label="Explicação"
              data-tooltip="Tempo gasto em domínios marcados como produtivos."
              >i</span
            >
          </span>
          <strong id="productiveTime">--</strong>
        </article>
        <article>
          <span class="title">
            Procrast
            <span
              class="info-icon"
              aria-label="Explicação"
              data-tooltip="Tempo gasto em domínios procrastinatórios."
              >i</span
            >
          </span>
          <strong id="procrastinationTime">--</strong>
        </article>
        <article>
          <span class="title">
            Inativ
            <span
              class="info-icon"
              aria-label="Explicação"
              data-tooltip="Períodos em que o navegador ficou aberto sem interação."
              >i</span
            >
          </span>
          <strong id="inactiveTime">--</strong>
        </article>
      </section>

      <section class="chart-card">
        <div class="chart-header">
          <h2>Radar diário</h2>
          <button id="refreshButton" class="ghost-button">Atualizar</button>
        </div>
        <div class="chart-wrapper">
          <canvas
            id="productivityChart"
            width="320"
            height="180"
            aria-label="Horas produtivas vs procrastinação"
          ></canvas>
        </div>
      </section>

      <section class="kpi-board">
        <div class="kpi-header">
          <h2>Indicadores extras</h2>
          <p>Sem mistério jurídico: números crus do seu dia.</p>
        </div>
        <div class="kpi-grid">
          <article>
            <span class="kpi-label">
              Foco ativo
              <span
                class="info-icon"
                aria-label="Explicação"
                data-tooltip="Percentual de tempo produtivo sobre tudo que foi rastreado hoje."
                >i</span
              >
            </span>
            <strong id="focusRateValue">--</strong>
            <small>Produtivo / jornada</small>
          </article>
          <article>
            <span class="kpi-label">
              Trocas por hora
              <span
                class="info-icon"
                aria-label="Explicação"
                data-tooltip="Número médio de trocas de abas por hora monitorada."
                data-align="right"
                >i</span
              >
            </span>
            <strong id="tabSwitchRateValue">--</strong>
            <small>Abas por hora rastreada</small>
          </article>
          <article>
            <span class="kpi-label">
              Tempo ocioso
              <span
                class="info-icon"
                aria-label="Explicação"
                data-tooltip="Porcentagem do tempo em que o navegador ficou aberto sem interação."
                >i</span
              >
            </span>
            <strong id="inactivePercentValue">--</strong>
            <small>Porcentagem do dia</small>
          </article>
          <article>
            <span class="kpi-label">
              Prod x Proc
              <span
                class="info-icon"
                aria-label="Explicação"
                data-tooltip="Horas produtivas que compensam cada hora em sites procrastinatórios."
                data-align="right"
                >i</span
              >
            </span>
            <strong id="productivityRatioValue">--</strong>
            <small>Horas produtivas por vilão</small>
          </article>
          <article class="highlight">
            <span class="kpi-label">
              Imersão campeã
              <span
                class="info-icon"
                aria-label="Explicação"
                data-tooltip="Domínio produtivo onde você investiu mais tempo contínuo hoje."
                >i</span
              >
            </span>
            <strong id="topFocusDomain">--</strong>
            <small id="topFocusTime">Sem dados</small>
          </article>
          <article class="highlight danger">
            <span class="kpi-label">
              Vilão do dia
              <span
                class="info-icon"
                aria-label="Explicação"
                data-tooltip="Domínio procrastinador que mais roubou o seu tempo."
                data-align="right"
                >i</span
              >
            </span>
            <strong id="topProcrastinationDomain">--</strong>
            <small id="topProcrastinationTime">Sem dados</small>
          </article>
        </div>
      </section>

      <section class="top-domains">
        <div class="top-header">
          <h2>Top 5 domínios</h2>
          <button id="optionsButton" class="ghost-button">Configurar</button>
        </div>
        <ol id="domainsList" class="domains-list">
          <li>Carregando...</li>
        </ol>
      </section>

      <section class="export-card">
        <div>
          <h2>Defenda seu foco</h2>
          <p>Transforme seus dados em argumentos com estilo Saul Goodman.</p>
        </div>
        <div class="export-actions">
          <button id="csvExportButton" class="ghost-button wide">Baixar CSV</button>
          <button id="pdfExportButton" class="primary-button wide">Gerar PDF</button>
          <button id="reportButton" class="ghost-button wide">Abrir relatório</button>
        </div>
      </section>
    </main>

    <footer>
      <button id="clearButton" class="danger-button">Limpar dados de hoje</button>
      <p class="privacy">Todos os dados ficam no navegador. Saul honra o sigilo profissional.</p>
    </footer>
  </body>
</html>
